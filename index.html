<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Professional Solana NFT Mint</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Solana -->
<script src="https://unpkg.com/@solana/web3.js@1.95.3/lib/index.iife.js"></script>

<!-- Wallet Adapter (PRO) -->
<script src="https://unpkg.com/@solana/wallet-adapter-base@0.9.23/lib/index.iife.js"></script>
<script src="https://unpkg.com/@solana/wallet-adapter-wallets@0.19.23/lib/index.iife.js"></script>
<script src="https://unpkg.com/@solana/wallet-adapter-ui@0.9.23/lib/index.iife.js"></script>

<!-- Metaplex -->
<script src="https://unpkg.com/@metaplex-foundation/js@0.20.1/dist/index.umd.js"></script>

<link rel="stylesheet"
 href="https://unpkg.com/@solana/wallet-adapter-ui@0.9.23/styles.css"/>

<style>
body{
  background:#0b0b0b;
  color:#fff;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.box{
  background:#151515;
  padding:30px;
  border-radius:12px;
  width:90%;
  max-width:420px;
  text-align:center;
}
button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  background:#7c3aed;
  color:#fff;
  font-size:16px;
}
</style>
</head>

<body>

<div class="box">
  <h2>üöÄ NFT Mint (Devnet)</h2>

  <div id="wallet-button"></div>

  <button onclick="mintNFT()">Mint NFT</button>
  <p id="status"></p>
</div>

<script>
const { Connection, clusterApiUrl, PublicKey } = solanaWeb3;
const { Metaplex, walletAdapterIdentity } = metaplex;
const { PhantomWalletAdapter, SolflareWalletAdapter } =
      solanaWalletAdapterWallets;

// DEVNET
const connection = new Connection(clusterApiUrl("devnet"));

// Candy Machine ID
const CANDY_MACHINE_ID = new PublicKey(
 "6Eqhz5ZC1ENXTfBDgkSEyyC6DTASvXz8DR7iNRQwxf8N"
);

// Wallet Adapter
const wallet = new solanaWalletAdapterWallets.PhantomWalletAdapter();

const walletButton =
 new solanaWalletAdapterUi.WalletMultiButton({
   wallets: [wallet]
 });

document
  .getElementById("wallet-button")
  .appendChild(walletButton);

let metaplex;

wallet.on("connect", () => {
  metaplex = Metaplex.make(connection)
    .use(walletAdapterIdentity(wallet));

  document.getElementById("status").innerText =
    "‚úÖ Wallet connected";
});

async function mintNFT(){
  if(!metaplex){
    document.getElementById("status").innerText =
      "‚ùå Connect wallet first";
    return;
  }

  try{
    document.getElementById("status").innerText = "‚è≥ Minting...";

    const cm = await metaplex
      .candyMachines()
      .findByAddress({ address: CANDY_MACHINE_ID });

    const { nft } = await metaplex
      .candyMachines()
      .mint({ candyMachine: cm });

    document.getElementById("status").innerText =
      "‚úÖ Minted: " + nft.address.toString();

  }catch(e){
    document.getElementById("status").innerText =
      "‚ùå Mint failed (guards / SOL)";
  }
}
</script>

</body>
</html>
